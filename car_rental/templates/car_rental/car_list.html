{% extends 'base.html' %} {% load static %} 

{% block content %} <div class="relative h-screen">

    <div class="absolute inset-0">
        <img src="{% static 'images/background.jpeg' %}" alt="Background Car" class="w-full h-160 object-cover">
        <div class="absolute inset-0 bg-black opacity-30"></div>
    </div>

    <div class="relative z-10 flex items-center justify-center h-full">
        <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-4xl">
            
            <div class="flex border-b mb-6">
    
                <button type="button" id="btn-self" 
                    class="py-2 px-6 text-blue-600 border-b-2 border-blue-600 font-semibold text-lg">
                    เช่ารถ
                </button>

                <button type="button" id="btn-driver" 
                    class="py-2 px-6 text-gray-500 hover:text-gray-700 font-semibold text-lg">
                    เช่ารถพร้อมคนขับ
                </button>

                <!-- input ซ่อนเก็บค่า service -->
                <input type="hidden" name="service_type" id="service_type" value="SELF_DRIVE">

            </div>


            <form action="{% url 'search_cars' %}" method="get" class="w-full">

                <!-- Hidden to track rental type -->
                <input type="hidden" id="service_type" name="service_type" value="SELF_DRIVE">

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <div>
                        <div class="mb-4">
                            <label class="block mb-2">จุดรับรถ</label>
                            <input type="text" name="pickup" placeholder="เลือกสถานที่"
                                class="w-full p-3 border border-gray-300 rounded-lg">
                        </div>

                        <label class="block mb-2">วันและเวลา</label>
                        <div class="flex gap-2">
                            <input type="text" name="start_date" id="datepicker-start" placeholder="ว/ด/ป"
                                class="w-1/3 p-3 border rounded-lg">

                            <input type="text" name="start_time" id="timepicker-start" placeholder="เวลา"
                                class="w-1/3 p-3 border rounded-lg">

                            <span class="text-gray-500">ถึง</span>

                            <input type="text" name="end_date" id="datepicker-end" placeholder="ว/ด/ป"
                                class="w-1/3 p-3 border rounded-lg">

                            <input type="text" name="end_time" id="timepicker-end" placeholder="เวลา"
                                class="w-1/3 p-3 border rounded-lg">
                        </div>
                    </div>

                    <div>
                        <div class="mb-4">
                            <label class="block mb-2">จุดคืนรถ</label>
                            <input type="text" name="dropoff" placeholder="เลือกสถานที่"
                                class="w-full p-3 border border-gray-300 rounded-lg">
                            
                        </div>

                        <div class="flex items-end gap-4">
                            <div class="flex-1">
                                <label class="block mb-2">ตัวกรอง</label>
                                <select name="car_type" class="w-full p-3 border border-gray-300 rounded-lg">
                                    <option value="">-- เลือกประเภทรถ --</option>
                                    <option value="SEDAN" {% if car_type == "SEDAN" %}selected{% endif %}>รถเก๋งขนาดเล็ก</option>
                                    <option value="TRUCK" {% if car_type == "TRUCK" %}selected{% endif %}>รถกระบะ</option>
                                    <option value="VAN" {% if car_type == "VAN" %}selected{% endif %}>รถตู้</option>
                                    <option value="EV" {% if car_type == "EV" %}selected{% endif %}>รถไฟฟ้า (EV)</option>

                                </select>
                            </div>

                            <button type="submit"
                                    class="bg-warp-blue text-white px-6 py-3 rounded-lg">
                                ค้นหา
                            </button>
                        </div>
                    </div>
                </div>
            </form>

        </div>
    </div>
</div>
{% endblock %} {% block scripts %}
<script>
document.addEventListener("DOMContentLoaded", function() {
    const btnSelf = document.getElementById("btn-self");
    const btnDriver = document.getElementById("btn-driver");
    const inputService = document.getElementById("service_type");

    btnSelf.onclick = function() {
        inputService.value = "SELF_DRIVE";
        btnSelf.classList.add("text-blue-600", "border-b-2", "border-blue-600");
        btnDriver.classList.remove("text-blue-600", "border-b-2", "border-blue-600");
    };

    btnDriver.onclick = function() {
        inputService.value = "WITH_DRIVER";
        btnDriver.classList.add("text-blue-600", "border-b-2", "border-blue-600");
        btnSelf.classList.remove("text-blue-600", "border-b-2", "border-blue-600");
    };

    flatpickr("#datepicker-start", { dateFormat: "d/m/Y" });
    flatpickr("#datepicker-end", { dateFormat: "d/m/Y" });
    flatpickr("#timepicker-start", { enableTime: true, noCalendar: true, dateFormat: "H:i" });
    flatpickr("#timepicker-end", { enableTime: true, noCalendar: true, dateFormat: "H:i" });
});

</script>
{% endblock %}
{% load static %}
{% load humanize %}
{% load i18n %} <nav class="bg-[#9e9e9e] px-4 py-3 shadow-lg relative z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center h-16">

        <div class="flex items-center gap-4">
            <button onclick="window.history.back()" 
                    class="w-10 h-10 rounded-full bg-gray-200/70 flex items-center justify-center 
                           hover:bg-gray-300 transition duration-150 shadow-md flex-shrink-0"
                    aria-label="Back">
                <i class="fas fa-arrow-left text-[#48a9b9] text-lg"></i>
            </button>
            
            <a href="{% url 'car_list' %}" class="flex items-center hover:opacity-90 transition">
                <div class="text-xl font-extrabold tracking-wider text-white" style="color: #1a4f6d; text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);">
                    <img src="{% static 'images/logo.png' %}" alt="WARPCAR" class="h-8 object-contain" style="filter: brightness(0.8);">
                </div>
            </a>
        </div>

        <div class="flex items-center gap-4">
            
            <form action="{% url 'set_language' %}" method="post" class="flex space-x-2 text-sm font-bold">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}">
                
                {% get_current_language as LANGUAGE_CODE %}

                <button type="submit" name="language" value="th" 
                        class="px-4 py-2 rounded shadow-md transition duration-150 text-white
                        {% if LANGUAGE_CODE == 'th' %} 
                            bg-[#368a96] ring-2 ring-white cursor-default 
                        {% else %} 
                            bg-[#48a9b9] hover:bg-[#368a96] opacity-70 hover:opacity-100 
                        {% endif %}">
                    ไทย
                </button>

                <button type="submit" name="language" value="en" 
                        class="px-4 py-2 rounded shadow-md transition duration-150 text-white
                        {% if LANGUAGE_CODE == 'en' %} 
                            bg-[#368a96] ring-2 ring-white cursor-default 
                        {% else %} 
                            bg-[#5fc0cd] hover:bg-[#48a9b9] opacity-70 hover:opacity-100 
                        {% endif %}">
                    EN
                </button>
            </form>
            {% if user.is_authenticated %}
                <a href="{% url 'profile' %}" class="relative group">
                    {% if user.profile.image %}
                        <img src="{{ user.profile.image.url }}" 
                             class="w-12 h-12 rounded-full border-2 border-white shadow-lg object-cover bg-white"
                             alt="Profile">
                    {% else %}
                        <div class="w-12 h-12 rounded-full bg-gray-200 shadow-lg flex items-center justify-center text-gray-500 text-xl border-2 border-white">
                            <i class="fas fa-user"></i>
                        </div>
                    {% endif %}
                </a>
            {% else %}
                <a href="{% url 'login' %}" class="w-12 h-12 rounded-full bg-gray-200 shadow-lg flex items-center justify-center text-gray-500 text-xl border-2 border-white cursor-pointer">
                    <i class="fas fa-user"></i>
                </a>
            {% endif %}
        </div>

    </div>
</nav>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link href="{% static 'css/styles.css' %}" rel="stylesheet">
<style>
    .bg-\[\#9e9e9e\] { background-color: #9e9e9e; }
</style>
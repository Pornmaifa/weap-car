{% load static %}
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ขั้นตอนที่ 5: รายละเอียดรถ - WarpCar</title>
    
    <link href="{% static 'dist/styles.css' %}?v=3" rel="stylesheet">
</head>
<body class="bg-white text-gray-800">

    <form method="POST" action="{% url 'add_car_step5' %}" class="container mx-auto p-8 flex flex-col min-h-screen justify-center">
        {% csrf_token %}

        <div class="max-w-2xl mx-auto w-full">

            <h1 class="text-4xl font-bold text-center mb-12">
                ชื่อรุ่น/ยี่ห้อรถ
            </h1>
            <label for="car_name" class="text-lg font-semibold mb-2 block">
                ชื่อรถ (ตัวอย่าง YARIS 1.2)
            </label>
            <input type="text" id="car_name" name="name"
                value="{{ car.brand }} {{ car.model }}"
                placeholder="กรอกชื่อรถของคุณ" required
                class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">

            <h2 class="text-3xl font-bold text-center mt-16 mb-8">
                รายละเอียดรถเพื่อเป็นจุดขายของคุณ
            </h2>
            <textarea id="car_description" name="description" rows="6" maxlength="200"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="เช่น รถประหยัดน้ำมัน, มีประกันชั้น 1..." required>{{ car.description }}</textarea>

            <div id="char-counter" class="text-right text-gray-500 mt-2">
                0/200
            </div>

        </div> <div class="fixed bottom-8 left-8">
            <a href="{% url 'add_car_step4' %}" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 text-lg">
                ถอยกลับ
            </a>
        </div>

        <div class="fixed bottom-8 right-8">
            <button type="submit" class="bg-warp-blue text-white px-8 py-3 rounded-lg font-semibold text-lg hover:bg-warp-blue-dark">
                ถัดไป
            </button>
        </div>
        
    </form>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // 1. หาช่อง Textarea
            const descriptionTextarea = document.getElementById('car_description');
            // 2. หาตัวแสดงผล
            const charCounter = document.getElementById('char-counter');
            
            // 3. ดักฟังเหตุการณ์ 'input' (เมื่อมีการพิมพ์)
            descriptionTextarea.addEventListener('input', function() {
                const currentLength = descriptionTextarea.value.length;
                charCounter.innerText = `${currentLength}/200`; // อัปเดตตัวเลข
            });
        });
    </script>
</body>
</html>